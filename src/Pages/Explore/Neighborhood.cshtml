@page "{id:int}"
@model LetsGoSEA.WebSite.Pages.Explore.NeighborhoodModel

@{
    ViewData["Title"] = "Explore " + @Model.CurrentNeighborhood.Name;
    Layout = "Shared/_Layout";
}

<!--Detail page of each neighborhoods!-->

<div class="jumbotron">
    <h1 class="display-2">
        @Model.CurrentNeighborhood.Name
        <h1 class="display-4">@Model.CurrentNeighborhood.City, @Model.CurrentNeighborhood.State</h1>
    </h1>
    <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
        @{var neighborhoodImages = @Model.CurrentNeighborhood.Image.Split(',');}
        @if (neighborhoodImages.Length != 1)
        {
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                @for (var i = 1; i < neighborhoodImages.Length; i++)
                {
                    <li data-target="#carouselExampleCaptions" data-slide-to="@i"></li>
                }
            </ol>
        }
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="@neighborhoodImages.First()" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                    <h5>@Model.CurrentNeighborhood.Name</h5>
                    <p>@Model.CurrentNeighborhood.ShortDesc</p>
                </div>
            </div>
            @if (neighborhoodImages.Length != 1)
            {
                @foreach (var neighborhoodImage in @neighborhoodImages.Skip(1).ToArray())
                {
                    <div class="carousel-item">
                        <img src="@neighborhoodImage" class="d-block w-100" alt="...">
                        <div class="carousel-caption">
                            <h5>@Model.CurrentNeighborhood.Name</h5>
                            <p>@Model.CurrentNeighborhood.ShortDesc</p>
                        </div>
                    </div>
                }
            }

        </div>
        @if (neighborhoodImages.Length != 1)
        {
            <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        }
    </div>
    <hr class="my-4" />
    <p>@Model.CurrentNeighborhood.ShortDesc</p>

    <!-- Google Maps for this neighborhood-->
    <iframe
      width="100%"
      height="500"
      style="border:0"
      referrerpolicy="no-referrer-when-downgrade"
      src="https://www.google.com/maps/embed/v1/place?key=@Model.GetKey()&q=@Model.CurrentNeighborhood.Name&zoom=15"
      allowfullscreen>
    </iframe>
    
    
    <!-- Show Walk Score, Transit Score, Bike Score if we have them.
    Otherwise, we don't show it
    -->
    @{
        if (Model.CurrentNeighborhood.WalkScore > 0)
        {
            <p>
                Walk Score: @Model.CurrentNeighborhood.WalkScore
                <span class="badge rounded-pill bg-info text-dark">@Model.CurrentNeighborhood.WalkScoreDescription</span>
            </p>
        }

        if (Model.CurrentNeighborhood.BikeScore > 0)
        {
            <p>
                Bike Score: @Model.CurrentNeighborhood.BikeScore
                <span class="badge rounded-pill bg-info text-dark">@Model.CurrentNeighborhood.BikeScoreDescription</span>
            </p>
        }
    }

    <!--Show rating stars-->
    @{
        @if (Model.voteCount == 0)
        {
            <span>Be the first to vote!</span>
        }
        else
        {
            <span>@Model.voteCount @Model.voteLabel</span>
        }
        @for (int i = 1; i < 6; i++)
        {
            var currentStar = i;
            if (i <= Model.avgRating)
            {
                <span class="fa fa-star checked" onclick="(e => SubmitRating(currentStar))"></span>
            }
            else
            {
                <span class="fa fa-star" onclick="(e => SubmitRating(currentStar))"></span>
            }
        }

    }
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</div>